<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>6å­”æ¿å…‹éš†è®¡æ•°å™¨ - æœ€ç»ˆä¼˜åŒ–ç‰ˆ</title>
    <style>
        :root { --accent: #27ae60; --primary: #2c3e50; }
        body { font-family: system-ui, sans-serif; background: #f0f2f5; margin: 0; padding: 20px; }
        .container { max-width: 1400px; margin: 0 auto; background: white; padding: 20px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        .main-layout { display: grid; grid-template-columns: 320px 1fr; gap: 20px; }
        .sidebar { background: #fff; padding: 20px; border-radius: 10px; border: 1px solid #ddd; }
        .canvas-container { background: #333; border-radius: 8px; overflow: hidden; position: relative; min-height: 500px; }
        canvas { display: block; max-width: 100%; height: auto; margin: 0 auto; cursor: crosshair; }
        .stats { background: var(--primary); color: white; padding: 15px; border-radius: 8px; text-align: center; margin-bottom: 15px; }
        .btn { width: 100%; padding: 12px; margin-bottom: 10px; border: none; border-radius: 6px; cursor: pointer; font-weight: bold; }
        .btn-blue { background: #3498db; color: white; }
        .btn-orange { background: #e67e22; color: white; }
        .loading-mask { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(255,255,255,0.9); display: flex; align-items: center; justify-content: center; z-index: 1000; flex-direction: column; }
        .label-group { margin: 15px 0 5px; font-size: 0.9em; font-weight: bold; display: flex; justify-content: space-between; }
        input[type="range"] { width: 100%; }
    </style>
</head>
<body>

<div id="loader" class="loading-mask">
    <div style="font-size: 1.5rem; margin-bottom: 10px;">ğŸ§ª æ­£åœ¨å¯åŠ¨å®éªŒç®—æ³•åº“...</div>
    <div id="load-status">æ­£åœ¨è¿æ¥é«˜é€ŸèŠ‚ç‚¹ (unpkg)...</div>
</div>

<div class="container">
    <div class="main-layout">
        <div class="sidebar">
            <div class="stats">
                <small>å…‹éš†è®¡æ•°ç»“æœ</small>
                <div style="font-size: 3rem;" id="totalCount">0</div>
            </div>
            
            <input type="file" id="fileInput" accept="image/*" style="display:none">
            <button class="btn btn-blue" onclick="document.getElementById('fileInput').click()">1. ä¸Šä¼ å›¾ç‰‡</button>
            <button class="btn" onclick="resetPoints()">é‡é€‰åœ†å¿ƒ</button>
            
            <hr>
            <div class="label-group"><span>åº•è‰²æ¨¡å¼:</span></div>
            <button class="btn btn-orange" id="modeBtn" onclick="toggleMode()">æµ…è‰²èƒŒæ™¯-æ·±è‰²é›†è½</button>

            <div class="label-group"><span>è¯†åˆ«çµæ•åº¦:</span><span id="v_thresh">127</span></div>
            <input type="range" id="threshold" min="0" max="255" value="127">

            <div class="label-group"><span>å­”å¾„åŠå¾„:</span><span id="v_radius">200</span></div>
            <input type="range" id="radiusRange" min="50" max="1500" value="200">

            <div class="label-group"><span>æœ€å°é›†è½é¢ç§¯:</span><span id="v_area">15</span></div>
            <input type="range" id="minArea" min="1" max="500" value="15">

            <div style="margin-top:20px; font-size: 0.8em; color: #666; border-top: 1px solid #eee; pt: 10px;">
                <b>è¯†åˆ«ä¸åˆ°ï¼Ÿå°è¯•ï¼š</b><br>
                1. åˆ‡æ¢åº•è‰²æ¨¡å¼<br>
                2
